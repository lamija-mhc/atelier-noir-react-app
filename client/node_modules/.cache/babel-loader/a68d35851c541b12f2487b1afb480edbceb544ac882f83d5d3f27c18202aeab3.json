{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function Counter(_ref){let{target,duration=2000}=_ref;const[count,setCount]=useState(0);const ref=useRef();const started=useRef(false);useEffect(()=>{const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;if(entry.isIntersecting&&!started.current){started.current=true;let start=0;const end=parseFloat(target);const stepTime=Math.abs(Math.floor(duration/end));const timer=setInterval(()=>{start+=1;setCount(prev=>{if(start>=end){clearInterval(timer);return end;}return start;});},stepTime);}},{threshold:0.5});if(ref.current){observer.observe(ref.current);}return()=>{if(ref.current){observer.unobserve(ref.current);}};},[target,duration]);return/*#__PURE__*/_jsx(\"strong\",{ref:ref,className:\"counter\",children:Number.isInteger(target)?Math.floor(count):count.toFixed(1)});}export default Counter;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","Counter","_ref","target","duration","count","setCount","ref","started","observer","IntersectionObserver","_ref2","entry","isIntersecting","current","start","end","parseFloat","stepTime","Math","abs","floor","timer","setInterval","prev","clearInterval","threshold","observe","unobserve","className","children","Number","isInteger","toFixed"],"sources":["C:/Users/muki_/atelier-noir/client/src/components/counter.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nfunction Counter({ target, duration = 2000 }) {\r\n  const [count, setCount] = useState(0);\r\n  const ref = useRef();\r\n  const started = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting && !started.current) {\r\n          started.current = true;\r\n          let start = 0;\r\n          const end = parseFloat(target);\r\n          const stepTime = Math.abs(Math.floor(duration / end));\r\n\r\n          const timer = setInterval(() => {\r\n            start += 1;\r\n            setCount((prev) => {\r\n              if (start >= end) {\r\n                clearInterval(timer);\r\n                return end;\r\n              }\r\n              return start;\r\n            });\r\n          }, stepTime);\r\n        }\r\n      },\r\n      { threshold: 0.5 }\r\n    );\r\n\r\n    if (ref.current) {\r\n      observer.observe(ref.current);\r\n    }\r\n\r\n    return () => {\r\n      if (ref.current) {\r\n        observer.unobserve(ref.current);\r\n      }\r\n    };\r\n  }, [target, duration]);\r\n\r\n  return (\r\n    <strong ref={ref} className=\"counter\">\r\n      {Number.isInteger(target) ? Math.floor(count) : count.toFixed(1)}\r\n    </strong>\r\n  );\r\n}\r\n\r\nexport default Counter;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE3D,QAAS,CAAAC,OAAOA,CAAAC,IAAA,CAA8B,IAA7B,CAAEC,MAAM,CAAEC,QAAQ,CAAG,IAAK,CAAC,CAAAF,IAAA,CAC1C,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAAAW,GAAG,CAAGT,MAAM,CAAC,CAAC,CACpB,KAAM,CAAAU,OAAO,CAAGV,MAAM,CAAC,KAAK,CAAC,CAE7BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,QAAQ,CAAG,GAAI,CAAAC,oBAAoB,CACvCC,KAAA,EAAa,IAAZ,CAACC,KAAK,CAAC,CAAAD,KAAA,CACN,GAAIC,KAAK,CAACC,cAAc,EAAI,CAACL,OAAO,CAACM,OAAO,CAAE,CAC5CN,OAAO,CAACM,OAAO,CAAG,IAAI,CACtB,GAAI,CAAAC,KAAK,CAAG,CAAC,CACb,KAAM,CAAAC,GAAG,CAAGC,UAAU,CAACd,MAAM,CAAC,CAC9B,KAAM,CAAAe,QAAQ,CAAGC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,KAAK,CAACjB,QAAQ,CAAGY,GAAG,CAAC,CAAC,CAErD,KAAM,CAAAM,KAAK,CAAGC,WAAW,CAAC,IAAM,CAC9BR,KAAK,EAAI,CAAC,CACVT,QAAQ,CAAEkB,IAAI,EAAK,CACjB,GAAIT,KAAK,EAAIC,GAAG,CAAE,CAChBS,aAAa,CAACH,KAAK,CAAC,CACpB,MAAO,CAAAN,GAAG,CACZ,CACA,MAAO,CAAAD,KAAK,CACd,CAAC,CAAC,CACJ,CAAC,CAAEG,QAAQ,CAAC,CACd,CACF,CAAC,CACD,CAAEQ,SAAS,CAAE,GAAI,CACnB,CAAC,CAED,GAAInB,GAAG,CAACO,OAAO,CAAE,CACfL,QAAQ,CAACkB,OAAO,CAACpB,GAAG,CAACO,OAAO,CAAC,CAC/B,CAEA,MAAO,IAAM,CACX,GAAIP,GAAG,CAACO,OAAO,CAAE,CACfL,QAAQ,CAACmB,SAAS,CAACrB,GAAG,CAACO,OAAO,CAAC,CACjC,CACF,CAAC,CACH,CAAC,CAAE,CAACX,MAAM,CAAEC,QAAQ,CAAC,CAAC,CAEtB,mBACEJ,IAAA,WAAQO,GAAG,CAAEA,GAAI,CAACsB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAClCC,MAAM,CAACC,SAAS,CAAC7B,MAAM,CAAC,CAAGgB,IAAI,CAACE,KAAK,CAAChB,KAAK,CAAC,CAAGA,KAAK,CAAC4B,OAAO,CAAC,CAAC,CAAC,CAC1D,CAAC,CAEb,CAEA,cAAe,CAAAhC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}