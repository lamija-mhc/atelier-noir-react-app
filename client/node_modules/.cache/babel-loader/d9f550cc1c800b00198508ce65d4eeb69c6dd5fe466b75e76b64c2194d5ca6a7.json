{"ast":null,"code":"import _objectSpread from\"C:/Users/muki_/atelier-noir/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[proizvodi,setProizvodi]=useState([]);const[noviProizvod,setNoviProizvod]=useState({naziv:\"\",cijena:\"\",opis:\"\",slika:\"\",gramaza:\"\"});const[kategorija,setKategorija]=useState(\"\");// obavezno da se izabere kategorija\nconst[poruka,setPoruka]=useState(\"\");// Uƒçitaj proizvode iz svih kategorija\nuseEffect(()=>{fetch(\"http://localhost:5000/api/products\").then(res=>res.json()).then(data=>setProizvodi(data.svi||[])).catch(err=>console.error(\"Gre≈°ka pri uƒçitavanju proizvoda\",err));},[]);const handleChange=e=>{setNoviProizvod(_objectSpread(_objectSpread({},noviProizvod),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setPoruka(\"\");// Provjera da li je kategorija odabrana\nif(!kategorija){setPoruka(\"‚ö†Ô∏è Molimo odaberite kategoriju.\");return;}// Provjera da su obavezna polja popunjena\nif(!noviProizvod.naziv.trim()||!noviProizvod.cijena.trim()||!noviProizvod.opis.trim()||!noviProizvod.slika.trim()||!noviProizvod.gramaza.trim()){setPoruka(\"‚ö†Ô∏è Molimo popunite sva polja.\");return;}try{// POST na endpoint za dodavanje proizvoda u kategoriju\nconst response=await fetch(\"http://localhost:5000/api/products/category\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({proizvod:noviProizvod,kategorija})});const data=await response.json();if(response.ok){setPoruka(\"‚úÖ Proizvod je uspje≈°no dodan!\");setProizvodi(prev=>[...prev,noviProizvod]);setNoviProizvod({naziv:\"\",cijena:\"\",opis:\"\",slika:\"\",gramaza:\"\"});setKategorija(\"\");}else{setPoruka(\"\\u274C Gre\\u0161ka: \".concat(data.error||\"Nepoznata gre≈°ka\"));}}catch(err){setPoruka(\"‚ö†Ô∏è Gre≈°ka pri dodavanju proizvoda.\");console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDEE0 Admin Panel\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginBottom:\"2rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"naziv\",placeholder:\"Naziv\",value:noviProizvod.naziv,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"gramaza\",placeholder:\"Grama\\u017Ea (npr. 250g)\",value:noviProizvod.gramaza,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cijena\",placeholder:\"Cijena (npr. 12.50)\",value:noviProizvod.cijena,onChange:handleChange,required:true,step:\"0.01\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"opis\",placeholder:\"Opis\",value:noviProizvod.opis,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"slika\",placeholder:\"URL slike\",value:noviProizvod.slika,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{value:kategorija,onChange:e=>setKategorija(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Odaberite kategoriju --\"}),/*#__PURE__*/_jsx(\"option\",{value:\"preporuke\",children:\"Preporuke\"}),/*#__PURE__*/_jsx(\"option\",{value:\"best\",children:\"Best\"}),/*#__PURE__*/_jsx(\"option\",{value:\"svi\",children:\"Svi\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Dodaj artikal\"})]}),poruka&&/*#__PURE__*/_jsx(\"p\",{children:poruka}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCE6 Postoje\\u0107i proizvodi (\",proizvodi.length,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{children:proizvodi.map((p,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[p.naziv,\" \\u2013 \",p.cijena,\" $\"]},i))})]});};export default AdminPanel;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AdminPanel","proizvodi","setProizvodi","noviProizvod","setNoviProizvod","naziv","cijena","opis","slika","gramaza","kategorija","setKategorija","poruka","setPoruka","fetch","then","res","json","data","svi","catch","err","console","error","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","trim","response","method","headers","body","JSON","stringify","proizvod","ok","prev","concat","style","padding","children","onSubmit","marginBottom","type","placeholder","onChange","required","step","length","map","p","i"],"sources":["C:/Users/muki_/atelier-noir/client/src/pages/admin-panel.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst AdminPanel = () => {\r\n  const [proizvodi, setProizvodi] = useState([]);\r\n  const [noviProizvod, setNoviProizvod] = useState({\r\n    naziv: \"\",\r\n    cijena: \"\",\r\n    opis: \"\",\r\n    slika: \"\",\r\n    gramaza: \"\"\r\n  });\r\n  const [kategorija, setKategorija] = useState(\"\"); // obavezno da se izabere kategorija\r\n  const [poruka, setPoruka] = useState(\"\");\r\n\r\n  // Uƒçitaj proizvode iz svih kategorija\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/products\")\r\n      .then(res => res.json())\r\n      .then(data => setProizvodi(data.svi || []))\r\n      .catch(err => console.error(\"Gre≈°ka pri uƒçitavanju proizvoda\", err));\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    setNoviProizvod({ ...noviProizvod, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setPoruka(\"\");\r\n\r\n    // Provjera da li je kategorija odabrana\r\n    if (!kategorija) {\r\n      setPoruka(\"‚ö†Ô∏è Molimo odaberite kategoriju.\");\r\n      return;\r\n    }\r\n\r\n    // Provjera da su obavezna polja popunjena\r\n    if (\r\n      !noviProizvod.naziv.trim() ||\r\n      !noviProizvod.cijena.trim() ||\r\n      !noviProizvod.opis.trim() ||\r\n      !noviProizvod.slika.trim() ||\r\n      !noviProizvod.gramaza.trim()\r\n    ) {\r\n      setPoruka(\"‚ö†Ô∏è Molimo popunite sva polja.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // POST na endpoint za dodavanje proizvoda u kategoriju\r\n      const response = await fetch(\"http://localhost:5000/api/products/category\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ proizvod: noviProizvod, kategorija }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setPoruka(\"‚úÖ Proizvod je uspje≈°no dodan!\");\r\n        setProizvodi(prev => [...prev, noviProizvod]);\r\n        setNoviProizvod({ naziv: \"\", cijena: \"\", opis: \"\", slika: \"\", gramaza: \"\" });\r\n        setKategorija(\"\");\r\n      } else {\r\n        setPoruka(`‚ùå Gre≈°ka: ${data.error || \"Nepoznata gre≈°ka\"}`);\r\n      }\r\n    } catch (err) {\r\n      setPoruka(\"‚ö†Ô∏è Gre≈°ka pri dodavanju proizvoda.\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"2rem\" }}>\r\n      <h2>üõ† Admin Panel</h2>\r\n\r\n      <form onSubmit={handleSubmit} style={{ marginBottom: \"2rem\" }}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"naziv\"\r\n          placeholder=\"Naziv\"\r\n          value={noviProizvod.naziv}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"gramaza\"\r\n          placeholder=\"Grama≈æa (npr. 250g)\"\r\n          value={noviProizvod.gramaza}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          name=\"cijena\"\r\n          placeholder=\"Cijena (npr. 12.50)\"\r\n          value={noviProizvod.cijena}\r\n          onChange={handleChange}\r\n          required\r\n          step=\"0.01\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"opis\"\r\n          placeholder=\"Opis\"\r\n          value={noviProizvod.opis}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"slika\"\r\n          placeholder=\"URL slike\"\r\n          value={noviProizvod.slika}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n\r\n        <select\r\n          value={kategorija}\r\n          onChange={e => setKategorija(e.target.value)}\r\n          required\r\n        >\r\n          <option value=\"\">-- Odaberite kategoriju --</option>\r\n          <option value=\"preporuke\">Preporuke</option>\r\n          <option value=\"best\">Best</option>\r\n          <option value=\"svi\">Svi</option>\r\n        </select>\r\n\r\n        <button type=\"submit\">Dodaj artikal</button>\r\n      </form>\r\n\r\n      {poruka && <p>{poruka}</p>}\r\n\r\n      <h3>üì¶ Postojeƒái proizvodi ({proizvodi.length})</h3>\r\n      <ul>\r\n        {proizvodi.map((p, i) => (\r\n          <li key={i}>{p.naziv} ‚Äì {p.cijena} $</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}