{"ast":null,"code":"import _objectSpread from\"C:/Users/muki_/atelier-noir/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";const AdminPanel=()=>{const[data,setData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[noviProizvod,setNoviProizvod]=useState({naziv:\"\",cijena:\"\",opis:\"\"});const[kategorijaZaNovi,setKategorijaZaNovi]=useState(\"svi\");const fetchData=async()=>{try{setLoading(true);const res=await axios.get(\"/api/data\");setData(res.data);}catch(err){setError(\"Greška pri učitavanju podataka\");}finally{setLoading(false);}};useEffect(()=>{fetchData();},[]);const dodajProizvod=async()=>{if(!noviProizvod.naziv||!noviProizvod.cijena){alert(\"Molimo unesite naziv i cijenu proizvoda.\");return;}try{await axios.put(\"/api/dodaj/\".concat(kategorijaZaNovi),noviProizvod);setNoviProizvod({naziv:\"\",cijena:\"\",opis:\"\"});fetchData();alert(\"Proizvod je uspješno dodat.\");}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Greška pri dodavanju proizvoda.\");}};const obrisiProizvod=async(kategorija,naziv)=>{if(!window.confirm(\"Da li ste sigurni da \\u017Eelite obrisati proizvod \\\"\".concat(naziv,\"\\\" iz kategorije \\\"\").concat(kategorija,\"\\\"?\")))return;try{await axios.delete(\"/api/obrisi/\".concat(kategorija,\"/\").concat(naziv));fetchData();alert(\"Proizvod je obrisan.\");}catch(_unused){alert(\"Greška pri brisanju proizvoda.\");}};if(loading)return/*#__PURE__*/React.createElement(\"p\",null,\"Učitavanje...\");if(error)return/*#__PURE__*/React.createElement(\"p\",null,error);return/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"20px\",maxWidth:700,margin:\"auto\"}},/*#__PURE__*/React.createElement(\"h2\",null,\"Admin panel - proizvodi\"),/*#__PURE__*/// Forma za dodavanje proizvoda\nReact.createElement(\"div\",{style:{marginBottom:20}},/*#__PURE__*/React.createElement(\"h3\",null,\"Dodaj novi proizvod\"),/*#__PURE__*/React.createElement(\"select\",{value:kategorijaZaNovi,onChange:e=>setKategorijaZaNovi(e.target.value)},Object.keys(data).map(kat=>/*#__PURE__*/React.createElement(\"option\",{key:kat,value:kat},kat))),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Naziv proizvoda\",value:noviProizvod.naziv,onChange:e=>setNoviProizvod(_objectSpread(_objectSpread({},noviProizvod),{},{naziv:e.target.value}))}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"Cijena (KM)\",value:noviProizvod.cijena,onChange:e=>setNoviProizvod(_objectSpread(_objectSpread({},noviProizvod),{},{cijena:e.target.value}))}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Opis proizvoda\",value:noviProizvod.opis,onChange:e=>setNoviProizvod(_objectSpread(_objectSpread({},noviProizvod),{},{opis:e.target.value}))}),/*#__PURE__*/React.createElement(\"button\",{onClick:dodajProizvod},\"Dodaj proizvod\")),// Prikaz proizvoda po kategorijama\nObject.entries(data).map(_ref=>{let[kategorija,proizvodi]=_ref;return/*#__PURE__*/React.createElement(\"div\",{key:kategorija,style:{marginBottom:30}},/*#__PURE__*/React.createElement(\"h3\",null,kategorija),proizvodi.length===0?/*#__PURE__*/React.createElement(\"p\",null,\"Nema proizvoda u kategoriji.\"):null,/*#__PURE__*/React.createElement(\"ul\",null,proizvodi.map(p=>/*#__PURE__*/React.createElement(\"li\",{key:p.naziv,style:{marginBottom:5}},/*#__PURE__*/React.createElement(\"b\",null,p.naziv),\" - \".concat(p.cijena,\" KM \"),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>obrisiProizvod(kategorija,p.naziv),style:{marginLeft:10}},\"Obriši\")))));}));};export default AdminPanel;","map":{"version":3,"names":["React","useEffect","useState","axios","AdminPanel","data","setData","loading","setLoading","error","setError","noviProizvod","setNoviProizvod","naziv","cijena","opis","kategorijaZaNovi","setKategorijaZaNovi","fetchData","res","get","err","dodajProizvod","alert","put","concat","_err$response","_err$response$data","response","obrisiProizvod","kategorija","window","confirm","delete","_unused","createElement","style","padding","maxWidth","margin","marginBottom","value","onChange","e","target","Object","keys","map","kat","key","type","placeholder","_objectSpread","onClick","entries","_ref","proizvodi","length","p","marginLeft"],"sources":["C:/Users/muki_/atelier-noir/client/src/pages/admin-panel.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst AdminPanel = () => {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const [noviProizvod, setNoviProizvod] = useState({\r\n    naziv: \"\",\r\n    cijena: \"\",\r\n    opis: \"\",\r\n  });\r\n  const [kategorijaZaNovi, setKategorijaZaNovi] = useState(\"svi\");\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(\"/api/data\");\r\n      setData(res.data);\r\n    } catch (err) {\r\n      setError(\"Greška pri učitavanju podataka\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const dodajProizvod = async () => {\r\n    if (!noviProizvod.naziv || !noviProizvod.cijena) {\r\n      alert(\"Molimo unesite naziv i cijenu proizvoda.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axios.put(`/api/dodaj/${kategorijaZaNovi}`, noviProizvod);\r\n      setNoviProizvod({ naziv: \"\", cijena: \"\", opis: \"\" });\r\n      fetchData();\r\n      alert(\"Proizvod je uspješno dodat.\");\r\n    } catch (err) {\r\n      alert(err.response?.data?.error || \"Greška pri dodavanju proizvoda.\");\r\n    }\r\n  };\r\n\r\n  const obrisiProizvod = async (kategorija, naziv) => {\r\n    if (!window.confirm(`Da li ste sigurni da želite obrisati proizvod \"${naziv}\" iz kategorije \"${kategorija}\"?`))\r\n      return;\r\n\r\n    try {\r\n      await axios.delete(`/api/obrisi/${kategorija}/${naziv}`);\r\n      fetchData();\r\n      alert(\"Proizvod je obrisan.\");\r\n    } catch {\r\n      alert(\"Greška pri brisanju proizvoda.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return React.createElement(\"p\", null, \"Učitavanje...\");\r\n  if (error) return React.createElement(\"p\", null, error);\r\n\r\n  return React.createElement(\r\n    \"div\",\r\n    { style: { padding: \"20px\", maxWidth: 700, margin: \"auto\" } },\r\n    React.createElement(\"h2\", null, \"Admin panel - proizvodi\"),\r\n\r\n    // Forma za dodavanje proizvoda\r\n    React.createElement(\r\n      \"div\",\r\n      { style: { marginBottom: 20 } },\r\n      React.createElement(\"h3\", null, \"Dodaj novi proizvod\"),\r\n\r\n      React.createElement(\r\n        \"select\",\r\n        {\r\n          value: kategorijaZaNovi,\r\n          onChange: (e) => setKategorijaZaNovi(e.target.value),\r\n        },\r\n        Object.keys(data).map((kat) =>\r\n          React.createElement(\"option\", { key: kat, value: kat }, kat)\r\n        )\r\n      ),\r\n\r\n      React.createElement(\"input\", {\r\n        type: \"text\",\r\n        placeholder: \"Naziv proizvoda\",\r\n        value: noviProizvod.naziv,\r\n        onChange: (e) =>\r\n          setNoviProizvod({ ...noviProizvod, naziv: e.target.value }),\r\n      }),\r\n\r\n      React.createElement(\"input\", {\r\n        type: \"number\",\r\n        placeholder: \"Cijena (KM)\",\r\n        value: noviProizvod.cijena,\r\n        onChange: (e) =>\r\n          setNoviProizvod({ ...noviProizvod, cijena: e.target.value }),\r\n      }),\r\n\r\n      React.createElement(\"input\", {\r\n        type: \"text\",\r\n        placeholder: \"Opis proizvoda\",\r\n        value: noviProizvod.opis,\r\n        onChange: (e) =>\r\n          setNoviProizvod({ ...noviProizvod, opis: e.target.value }),\r\n      }),\r\n\r\n      React.createElement(\r\n        \"button\",\r\n        { onClick: dodajProizvod },\r\n        \"Dodaj proizvod\"\r\n      )\r\n    ),\r\n\r\n    // Prikaz proizvoda po kategorijama\r\n    Object.entries(data).map(([kategorija, proizvodi]) =>\r\n      React.createElement(\r\n        \"div\",\r\n        { key: kategorija, style: { marginBottom: 30 } },\r\n        React.createElement(\"h3\", null, kategorija),\r\n        proizvodi.length === 0\r\n          ? React.createElement(\"p\", null, \"Nema proizvoda u kategoriji.\")\r\n          : null,\r\n        React.createElement(\r\n          \"ul\",\r\n          null,\r\n          proizvodi.map((p) =>\r\n            React.createElement(\r\n              \"li\",\r\n              { key: p.naziv, style: { marginBottom: 5 } },\r\n              React.createElement(\"b\", null, p.naziv),\r\n              ` - ${p.cijena} KM `,\r\n              React.createElement(\r\n                \"button\",\r\n                {\r\n                  onClick: () => obrisiProizvod(kategorija, p.naziv),\r\n                  style: { marginLeft: 10 },\r\n                },\r\n                \"Obriši\"\r\n              )\r\n            )\r\n          )\r\n        )\r\n      )\r\n    )\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"uHAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGJ,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGN,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAACS,YAAY,CAAEC,eAAe,CAAC,CAAGV,QAAQ,CAAC,CAC/CW,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,EAAE,CACVC,IAAI,CAAE,EACR,CAAC,CAAC,CACF,KAAM,CAACC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAE/D,KAAM,CAAAgB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACFV,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAW,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,CAAC,WAAW,CAAC,CACxCd,OAAO,CAACa,GAAG,CAACd,IAAI,CAAC,CACnB,CAAE,MAAOgB,GAAG,CAAE,CACZX,QAAQ,CAAC,gCAAgC,CAAC,CAC5C,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDP,SAAS,CAAC,IAAM,CACdiB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACX,YAAY,CAACE,KAAK,EAAI,CAACF,YAAY,CAACG,MAAM,CAAE,CAC/CS,KAAK,CAAC,0CAA0C,CAAC,CACjD,OACF,CAEA,GAAI,CACF,KAAM,CAAApB,KAAK,CAACqB,GAAG,eAAAC,MAAA,CAAeT,gBAAgB,EAAIL,YAAY,CAAC,CAC/DC,eAAe,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAAC,CACpDG,SAAS,CAAC,CAAC,CACXK,KAAK,CAAC,6BAA6B,CAAC,CACtC,CAAE,MAAOF,GAAG,CAAE,KAAAK,aAAA,CAAAC,kBAAA,CACZJ,KAAK,CAAC,EAAAG,aAAA,CAAAL,GAAG,CAACO,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcrB,IAAI,UAAAsB,kBAAA,iBAAlBA,kBAAA,CAAoBlB,KAAK,GAAI,iCAAiC,CAAC,CACvE,CACF,CAAC,CAED,KAAM,CAAAoB,cAAc,CAAG,KAAAA,CAAOC,UAAU,CAAEjB,KAAK,GAAK,CAClD,GAAI,CAACkB,MAAM,CAACC,OAAO,yDAAAP,MAAA,CAAmDZ,KAAK,wBAAAY,MAAA,CAAoBK,UAAU,OAAI,CAAC,CAC5G,OAEF,GAAI,CACF,KAAM,CAAA3B,KAAK,CAAC8B,MAAM,gBAAAR,MAAA,CAAgBK,UAAU,MAAAL,MAAA,CAAIZ,KAAK,CAAE,CAAC,CACxDK,SAAS,CAAC,CAAC,CACXK,KAAK,CAAC,sBAAsB,CAAC,CAC/B,CAAE,MAAAW,OAAA,CAAM,CACNX,KAAK,CAAC,gCAAgC,CAAC,CACzC,CACF,CAAC,CAED,GAAIhB,OAAO,CAAE,mBAAOP,KAAK,CAACmC,aAAa,CAAC,GAAG,CAAE,IAAI,CAAE,eAAe,CAAC,CACnE,GAAI1B,KAAK,CAAE,mBAAOT,KAAK,CAACmC,aAAa,CAAC,GAAG,CAAE,IAAI,CAAE1B,KAAK,CAAC,CAEvD,mBAAOT,KAAK,CAACmC,aAAa,CACxB,KAAK,CACL,CAAEC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,QAAQ,CAAE,GAAG,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAC,cAC7DvC,KAAK,CAACmC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAE,yBAAyB,CAAC,cAE1D;AACAnC,KAAK,CAACmC,aAAa,CACjB,KAAK,CACL,CAAEC,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAC,cAC/BxC,KAAK,CAACmC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAE,qBAAqB,CAAC,cAEtDnC,KAAK,CAACmC,aAAa,CACjB,QAAQ,CACR,CACEM,KAAK,CAAEzB,gBAAgB,CACvB0B,QAAQ,CAAGC,CAAC,EAAK1B,mBAAmB,CAAC0B,CAAC,CAACC,MAAM,CAACH,KAAK,CACrD,CAAC,CACDI,MAAM,CAACC,IAAI,CAACzC,IAAI,CAAC,CAAC0C,GAAG,CAAEC,GAAG,eACxBhD,KAAK,CAACmC,aAAa,CAAC,QAAQ,CAAE,CAAEc,GAAG,CAAED,GAAG,CAAEP,KAAK,CAAEO,GAAI,CAAC,CAAEA,GAAG,CAC7D,CACF,CAAC,cAEDhD,KAAK,CAACmC,aAAa,CAAC,OAAO,CAAE,CAC3Be,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,iBAAiB,CAC9BV,KAAK,CAAE9B,YAAY,CAACE,KAAK,CACzB6B,QAAQ,CAAGC,CAAC,EACV/B,eAAe,CAAAwC,aAAA,CAAAA,aAAA,IAAMzC,YAAY,MAAEE,KAAK,CAAE8B,CAAC,CAACC,MAAM,CAACH,KAAK,EAAE,CAC9D,CAAC,CAAC,cAEFzC,KAAK,CAACmC,aAAa,CAAC,OAAO,CAAE,CAC3Be,IAAI,CAAE,QAAQ,CACdC,WAAW,CAAE,aAAa,CAC1BV,KAAK,CAAE9B,YAAY,CAACG,MAAM,CAC1B4B,QAAQ,CAAGC,CAAC,EACV/B,eAAe,CAAAwC,aAAA,CAAAA,aAAA,IAAMzC,YAAY,MAAEG,MAAM,CAAE6B,CAAC,CAACC,MAAM,CAACH,KAAK,EAAE,CAC/D,CAAC,CAAC,cAEFzC,KAAK,CAACmC,aAAa,CAAC,OAAO,CAAE,CAC3Be,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,gBAAgB,CAC7BV,KAAK,CAAE9B,YAAY,CAACI,IAAI,CACxB2B,QAAQ,CAAGC,CAAC,EACV/B,eAAe,CAAAwC,aAAA,CAAAA,aAAA,IAAMzC,YAAY,MAAEI,IAAI,CAAE4B,CAAC,CAACC,MAAM,CAACH,KAAK,EAAE,CAC7D,CAAC,CAAC,cAEFzC,KAAK,CAACmC,aAAa,CACjB,QAAQ,CACR,CAAEkB,OAAO,CAAE/B,aAAc,CAAC,CAC1B,gBACF,CACF,CAAC,CAED;AACAuB,MAAM,CAACS,OAAO,CAACjD,IAAI,CAAC,CAAC0C,GAAG,CAACQ,IAAA,MAAC,CAACzB,UAAU,CAAE0B,SAAS,CAAC,CAAAD,IAAA,oBAC/CvD,KAAK,CAACmC,aAAa,CACjB,KAAK,CACL,CAAEc,GAAG,CAAEnB,UAAU,CAAEM,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAC,cAChDxC,KAAK,CAACmC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAEL,UAAU,CAAC,CAC3C0B,SAAS,CAACC,MAAM,GAAK,CAAC,cAClBzD,KAAK,CAACmC,aAAa,CAAC,GAAG,CAAE,IAAI,CAAE,8BAA8B,CAAC,CAC9D,IAAI,cACRnC,KAAK,CAACmC,aAAa,CACjB,IAAI,CACJ,IAAI,CACJqB,SAAS,CAACT,GAAG,CAAEW,CAAC,eACd1D,KAAK,CAACmC,aAAa,CACjB,IAAI,CACJ,CAAEc,GAAG,CAAES,CAAC,CAAC7C,KAAK,CAAEuB,KAAK,CAAE,CAAEI,YAAY,CAAE,CAAE,CAAE,CAAC,cAC5CxC,KAAK,CAACmC,aAAa,CAAC,GAAG,CAAE,IAAI,CAAEuB,CAAC,CAAC7C,KAAK,CAAC,OAAAY,MAAA,CACjCiC,CAAC,CAAC5C,MAAM,sBACdd,KAAK,CAACmC,aAAa,CACjB,QAAQ,CACR,CACEkB,OAAO,CAAEA,CAAA,GAAMxB,cAAc,CAACC,UAAU,CAAE4B,CAAC,CAAC7C,KAAK,CAAC,CAClDuB,KAAK,CAAE,CAAEuB,UAAU,CAAE,EAAG,CAC1B,CAAC,CACD,QACF,CACF,CACF,CACF,CACF,CAAC,EACH,CACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAvD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}