{"ast":null,"code":"import _objectSpread from\"C:/Users/muki_/atelier-noir/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[proizvodi,setProizvodi]=useState([]);const[noviProizvod,setNoviProizvod]=useState({naziv:\"\",cijena:\"\",opis:\"\",slika:\"\"});const[kategorija,setKategorija]=useState(\"akcija\");const[poruka,setPoruka]=useState(\"\");useEffect(()=>{fetch(\"http://localhost:5000/api/products\").then(res=>res.json()).then(data=>setProizvodi(data.svi||[])).catch(err=>console.error(\"Gre≈°ka pri uƒçitavanju proizvoda\",err));},[]);const handleChange=e=>{setNoviProizvod(_objectSpread(_objectSpread({},noviProizvod),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setPoruka(\"\");try{// Dodaj u \"svi\"\nconst response1=await fetch(\"http://localhost:5000/api/products\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(noviProizvod)});// Dodaj u kategoriju\nconst response2=await fetch(\"http://localhost:5000/api/products/category\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({proizvod:noviProizvod,kategorija})});const res1=await response1.json();const res2=await response2.json();if(response1.ok&&response2.ok){setPoruka(\"\\u2705 \".concat(res1.message,\" i \").concat(res2.message));setProizvodi(prev=>[...prev,noviProizvod]);setNoviProizvod({naziv:\"\",cijena:\"\",opis:\"\",slika:\"\"});}else{setPoruka(\"\\u274C \".concat(res1.error||\"\",\" \").concat(res2.error||\"\"));}}catch(err){setPoruka(\"‚ö†Ô∏è Gre≈°ka pri dodavanju proizvoda.\");}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDEE0 Admin Panel\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginBottom:\"2rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"naziv\",placeholder:\"Naziv\",value:noviProizvod.naziv,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cijena\",placeholder:\"Cijena\",value:noviProizvod.cijena,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"opis\",placeholder:\"Opis\",value:noviProizvod.opis,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"slika\",placeholder:\"URL slike\",value:noviProizvod.slika,onChange:handleChange}),/*#__PURE__*/_jsxs(\"select\",{value:kategorija,onChange:e=>setKategorija(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"akcija\",children:\"Akcija\"}),/*#__PURE__*/_jsx(\"option\",{value:\"popularno\",children:\"Popularno\"}),/*#__PURE__*/_jsx(\"option\",{value:\"preporucujemo\",children:\"Preporu\\u010Dujemo\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Dodaj artikal\"})]}),poruka&&/*#__PURE__*/_jsx(\"p\",{children:poruka}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCE6 Postoje\\u0107i proizvodi (\",proizvodi.length,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{children:proizvodi.map((p,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[p.naziv,\" \\u2013 \",p.cijena,\" KM\"]},i))})]});};export default AdminPanel;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AdminPanel","proizvodi","setProizvodi","noviProizvod","setNoviProizvod","naziv","cijena","opis","slika","kategorija","setKategorija","poruka","setPoruka","fetch","then","res","json","data","svi","catch","err","console","error","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response1","method","headers","body","JSON","stringify","response2","proizvod","res1","res2","ok","concat","message","prev","style","padding","children","onSubmit","marginBottom","type","placeholder","onChange","required","length","map","p","i"],"sources":["C:/Users/muki_/atelier-noir/client/src/pages/admin-panel.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst AdminPanel = () => {\r\n  const [proizvodi, setProizvodi] = useState([]);\r\n  const [noviProizvod, setNoviProizvod] = useState({\r\n    naziv: \"\",\r\n    cijena: \"\",\r\n    opis: \"\",\r\n    slika: \"\",\r\n  });\r\n  const [kategorija, setKategorija] = useState(\"akcija\");\r\n  const [poruka, setPoruka] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/products\")\r\n      .then(res => res.json())\r\n      .then(data => setProizvodi(data.svi || []))\r\n      .catch(err => console.error(\"Gre≈°ka pri uƒçitavanju proizvoda\", err));\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    setNoviProizvod({ ...noviProizvod, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setPoruka(\"\");\r\n\r\n    try {\r\n      // Dodaj u \"svi\"\r\n      const response1 = await fetch(\"http://localhost:5000/api/products\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(noviProizvod),\r\n      });\r\n\r\n      // Dodaj u kategoriju\r\n      const response2 = await fetch(\"http://localhost:5000/api/products/category\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ proizvod: noviProizvod, kategorija }),\r\n      });\r\n\r\n      const res1 = await response1.json();\r\n      const res2 = await response2.json();\r\n\r\n      if (response1.ok && response2.ok) {\r\n        setPoruka(`‚úÖ ${res1.message} i ${res2.message}`);\r\n        setProizvodi(prev => [...prev, noviProizvod]);\r\n        setNoviProizvod({ naziv: \"\", cijena: \"\", opis: \"\", slika: \"\" });\r\n      } else {\r\n        setPoruka(`‚ùå ${res1.error || \"\"} ${res2.error || \"\"}`);\r\n      }\r\n    } catch (err) {\r\n      setPoruka(\"‚ö†Ô∏è Gre≈°ka pri dodavanju proizvoda.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"2rem\" }}>\r\n      <h2>üõ† Admin Panel</h2>\r\n\r\n      <form onSubmit={handleSubmit} style={{ marginBottom: \"2rem\" }}>\r\n        <input type=\"text\" name=\"naziv\" placeholder=\"Naziv\" value={noviProizvod.naziv} onChange={handleChange} required />\r\n        <input type=\"number\" name=\"cijena\" placeholder=\"Cijena\" value={noviProizvod.cijena} onChange={handleChange} required />\r\n        <input type=\"text\" name=\"opis\" placeholder=\"Opis\" value={noviProizvod.opis} onChange={handleChange} />\r\n        <input type=\"text\" name=\"slika\" placeholder=\"URL slike\" value={noviProizvod.slika} onChange={handleChange} />\r\n        <select value={kategorija} onChange={e => setKategorija(e.target.value)}>\r\n          <option value=\"akcija\">Akcija</option>\r\n          <option value=\"popularno\">Popularno</option>\r\n          <option value=\"preporucujemo\">Preporuƒçujemo</option>\r\n        </select>\r\n        <button type=\"submit\">Dodaj artikal</button>\r\n      </form>\r\n\r\n      {poruka && <p>{poruka}</p>}\r\n\r\n      <h3>üì¶ Postojeƒái proizvodi ({proizvodi.length})</h3>\r\n      <ul>\r\n        {proizvodi.map((p, i) => (\r\n          <li key={i}>{p.naziv} ‚Äì {p.cijena} KM</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"uHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACS,YAAY,CAAEC,eAAe,CAAC,CAAGV,QAAQ,CAAC,CAC/CW,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,EAAE,CACVC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EACT,CAAC,CAAC,CACF,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,QAAQ,CAAC,CACtD,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAExCC,SAAS,CAAC,IAAM,CACdkB,KAAK,CAAC,oCAAoC,CAAC,CACxCC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAIf,YAAY,CAACe,IAAI,CAACC,GAAG,EAAI,EAAE,CAAC,CAAC,CAC1CC,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,KAAK,CAAC,iCAAiC,CAAEF,GAAG,CAAC,CAAC,CACxE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,YAAY,CAAGC,CAAC,EAAI,CACxBpB,eAAe,CAAAqB,aAAA,CAAAA,aAAA,IAAMtB,YAAY,MAAE,CAACqB,CAAC,CAACE,MAAM,CAACC,IAAI,EAAGH,CAAC,CAACE,MAAM,CAACE,KAAK,EAAE,CAAC,CACvE,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAL,CAAC,EAAI,CAC9BA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClBlB,SAAS,CAAC,EAAE,CAAC,CAEb,GAAI,CACF;AACA,KAAM,CAAAmB,SAAS,CAAG,KAAM,CAAAlB,KAAK,CAAC,oCAAoC,CAAE,CAClEmB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACjC,YAAY,CACnC,CAAC,CAAC,CAEF;AACA,KAAM,CAAAkC,SAAS,CAAG,KAAM,CAAAxB,KAAK,CAAC,6CAA6C,CAAE,CAC3EmB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEE,QAAQ,CAAEnC,YAAY,CAAEM,UAAW,CAAC,CAC7D,CAAC,CAAC,CAEF,KAAM,CAAA8B,IAAI,CAAG,KAAM,CAAAR,SAAS,CAACf,IAAI,CAAC,CAAC,CACnC,KAAM,CAAAwB,IAAI,CAAG,KAAM,CAAAH,SAAS,CAACrB,IAAI,CAAC,CAAC,CAEnC,GAAIe,SAAS,CAACU,EAAE,EAAIJ,SAAS,CAACI,EAAE,CAAE,CAChC7B,SAAS,WAAA8B,MAAA,CAAMH,IAAI,CAACI,OAAO,QAAAD,MAAA,CAAMF,IAAI,CAACG,OAAO,CAAE,CAAC,CAChDzC,YAAY,CAAC0C,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEzC,YAAY,CAAC,CAAC,CAC7CC,eAAe,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAC,CACjE,CAAC,IAAM,CACLI,SAAS,WAAA8B,MAAA,CAAMH,IAAI,CAACjB,KAAK,EAAI,EAAE,MAAAoB,MAAA,CAAIF,IAAI,CAAClB,KAAK,EAAI,EAAE,CAAE,CAAC,CACxD,CACF,CAAE,MAAOF,GAAG,CAAE,CACZR,SAAS,CAAC,oCAAoC,CAAC,CACjD,CACF,CAAC,CAED,mBACEb,KAAA,QAAK8C,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC9BlD,IAAA,OAAAkD,QAAA,CAAI,0BAAc,CAAI,CAAC,cAEvBhD,KAAA,SAAMiD,QAAQ,CAAEnB,YAAa,CAACgB,KAAK,CAAE,CAAEI,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eAC5DlD,IAAA,UAAOqD,IAAI,CAAC,MAAM,CAACvB,IAAI,CAAC,OAAO,CAACwB,WAAW,CAAC,OAAO,CAACvB,KAAK,CAAEzB,YAAY,CAACE,KAAM,CAAC+C,QAAQ,CAAE7B,YAAa,CAAC8B,QAAQ,MAAE,CAAC,cAClHxD,IAAA,UAAOqD,IAAI,CAAC,QAAQ,CAACvB,IAAI,CAAC,QAAQ,CAACwB,WAAW,CAAC,QAAQ,CAACvB,KAAK,CAAEzB,YAAY,CAACG,MAAO,CAAC8C,QAAQ,CAAE7B,YAAa,CAAC8B,QAAQ,MAAE,CAAC,cACvHxD,IAAA,UAAOqD,IAAI,CAAC,MAAM,CAACvB,IAAI,CAAC,MAAM,CAACwB,WAAW,CAAC,MAAM,CAACvB,KAAK,CAAEzB,YAAY,CAACI,IAAK,CAAC6C,QAAQ,CAAE7B,YAAa,CAAE,CAAC,cACtG1B,IAAA,UAAOqD,IAAI,CAAC,MAAM,CAACvB,IAAI,CAAC,OAAO,CAACwB,WAAW,CAAC,WAAW,CAACvB,KAAK,CAAEzB,YAAY,CAACK,KAAM,CAAC4C,QAAQ,CAAE7B,YAAa,CAAE,CAAC,cAC7GxB,KAAA,WAAQ6B,KAAK,CAAEnB,UAAW,CAAC2C,QAAQ,CAAE5B,CAAC,EAAId,aAAa,CAACc,CAAC,CAACE,MAAM,CAACE,KAAK,CAAE,CAAAmB,QAAA,eACtElD,IAAA,WAAQ+B,KAAK,CAAC,QAAQ,CAAAmB,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtClD,IAAA,WAAQ+B,KAAK,CAAC,WAAW,CAAAmB,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5ClD,IAAA,WAAQ+B,KAAK,CAAC,eAAe,CAAAmB,QAAA,CAAC,oBAAa,CAAQ,CAAC,EAC9C,CAAC,cACTlD,IAAA,WAAQqD,IAAI,CAAC,QAAQ,CAAAH,QAAA,CAAC,eAAa,CAAQ,CAAC,EACxC,CAAC,CAENpC,MAAM,eAAId,IAAA,MAAAkD,QAAA,CAAIpC,MAAM,CAAI,CAAC,cAE1BZ,KAAA,OAAAgD,QAAA,EAAI,yCAAwB,CAAC9C,SAAS,CAACqD,MAAM,CAAC,GAAC,EAAI,CAAC,cACpDzD,IAAA,OAAAkD,QAAA,CACG9C,SAAS,CAACsD,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBAClB1D,KAAA,OAAAgD,QAAA,EAAaS,CAAC,CAACnD,KAAK,CAAC,UAAG,CAACmD,CAAC,CAAClD,MAAM,CAAC,KAAG,GAA5BmD,CAAgC,CAC1C,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}